{% extends "base.html" %}
{% block title %} Â· API Tokens{% endblock %}
{% block content %}
<div class="max-w-4xl space-y-6">
  <div>
    <h1 class="text-3xl font-bold">Extension API Tokens</h1>
    <p class="text-slate-600">Use these tokens for Firefox extension sync and API automation.</p>
  </div>

  {% if issued_token %}
  <div class="card bg-amber-50 border border-amber-200 rounded-xl p-4">
    <p class="font-semibold text-amber-900">Copy this token now</p>
    <p class="text-sm text-amber-800">For security, LinkLoom will not show this token again.</p>
    <code class="block mt-2 p-2 rounded bg-amber-100 mono text-sm break-all">{{ issued_token }}</code>
  </div>
  {% endif %}

  <form method="post" class="card bg-white/90 border border-slate-200 rounded-xl p-5 flex flex-wrap gap-3 items-end">
    <div class="flex-1 min-w-[220px]">
      <label class="block text-sm mb-1">Token Name</label>
      <input name="name" value="Firefox Sync" class="w-full border border-slate-300 rounded-lg px-3 py-2 bg-white">
    </div>
    <button class="px-4 py-2.5 rounded-xl text-white" style="background: var(--ll-accent-2);">Create Token</button>
  </form>

  <section class="card bg-white/90 border border-slate-200 rounded-xl p-5">
    <h2 class="text-xl font-semibold mb-3">Active Tokens</h2>
    <div class="space-y-3">
      {% for token in tokens %}
      <div class="border border-slate-200 rounded-lg p-3 flex flex-wrap items-center justify-between gap-3">
        <div>
          <p class="font-medium">{{ token.name }}</p>
          <p class="text-xs mono text-slate-500">Created {{ token.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
        </div>
        <form method="post" action="{{ url_for('web.revoke_token', token_id=token.id) }}">
          <button class="px-3 py-1.5 rounded-lg text-white" style="background: var(--ll-danger);">Revoke</button>
        </form>
      </div>
      {% else %}
      <p class="text-slate-600">No active tokens.</p>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
